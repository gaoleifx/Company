= HDK Copy to Points =

#type: node
#context: sop
#internal: hdk_copytopoints
#icon: SOP/hdk_copytopoints
#version: 1.0
#tags: copy, model

"""Copies geometry in the first input onto the points of the second input."""


== Overview ==

This is very useful for populating scenes with repeated elements such as trees, buildings, or snowflakes with full control over the placement of the copies.

TIP:
    To simply create multiple copies of geometry without needing target points, use [Duplicate|Node:sop/duplicate].

For example, you can arrange copies in a spherical shape by copying them onto the points of polygonal sphere. Or you could [scatter|Node:sop/scatter] points across a terrain geometry and copy trees onto the points.

Note that this node creates additional geometry in the scene for each copy. If you have very large numbers of copies, you may want to investigate [render-time instancing|/copy/instancing] or use the __Pack and Instance__ option to reduce memory usage.

For more information, see [copying to points|/copy/copytopoints] in the [copying and instancing|/copy/] chapter.


== Varying the copies == (instanceattrs)

* When you copy or instance geometry onto points, Houdini looks for specific attributes on the destination points to customize each copy/instance. For example, you can change the scale of each copy by creating a `pscale` attribute on the points you copy onto. See [instancing point attributes|/copy/instanceattrs].

* If you need to copy different source geometry to different points, the __Piece Attribute__ option gives that ability if all geometry to be copied is in the source geometry input, (the first input).

* If you need more control over the copies, you can [use a For-Each loop|/copy/copytopoints#foreach] to process each copy individually.


@parameters

Source Group:
    #id: sourcegroup

    A subset of the source (first input) primitives or points to copy from.
    You can create groups with the [Group SOP|Node:sop/group].

Source Group Type:
    #id: sourcegrouptype

    The type of group that __Source Group__ specifies.

    If __Guess from Group__ is specified and the group type is ambiguous, the guess is made that __Group__ specifies a primitive group.

Target Points:
    #id: targetgroup

    A subset of the target (second input) points to copy onto.

Piece Attribute:
    #id: idattrib

    The name of an integer or string target point attribute, and corresponding source point or primitive attribute, indicating what parts of the source should be copied to each target point.  All source points or primitives with a value matching a target point's value will be copied to that target point.  If the target point attribute is an integer attribute and no source attribute exists, the integer will specify which single primitive to copy from the source to each target point.

Pack and Instance:
    #id: pack

    Pack the input source geometry into an Packed Geometry primitive before copying. This results in the input geometry being shared (instanced) by each copy rather than being duplicated for each copy.

    If a __Source Group__ or __Piece Attribute__ are specified, subsets of the source geometry will be packed into Packed Geometry primitives.

Pivot Location:
    #id: pivot

    Specifies how to initialize the offset for the point referenced by the
    packed primitive.

Display As:
    #id: viewportlod

    The viewport LOD for the specified packed primitives.

Transform Using Point Orientations:
    #id: transform

    Rotates copies to face the target point normals. Also
    applies translations, rotations and scales according to the
    trans, rot, and scale point attributes on the template
    points (if these attributes exist).

Reset Attributes from Target:
    #id: resettargetattribs

    Sets the __Attributes from Target__ parameters to the default behaviour.

Attributes from Target:
    #id: targetattribs

    Copy attributes from the template points onto the copies,
    according to the values in the attribute fields below.

Apply to:
    Indicates whether to apply this row's target point attributes to the output point, vertices, or primitives.  A single target point attribute can only be applied to one type of output element.

by:
    Method by which to apply this row's target point attributes.  Values can be applied by copying, or by multiplying with, adding to, or subtracting from source attributes, or the "Nothing" option can be selected to override an earlier row indicating to apply an attribute.  If no matching source attribute exists, the multiplying and adding options will copy, and the subtracting option will copy the negated value, (as if subtracting from zero).  Multiplying, adding, and subtracting only apply to numeric and group attributes; other attributes will be copied.  For groups, the operations correspond with intersection, union, and subtraction, respectively.

Attributes:
    Pattern of target point attribute names to match for this row.

@inputs

Geometry to Copy:
    The geometry to copy.

Target Points to Copy to:
    Copy the source geometry onto the points of this
    geometry.

@related
    - [Node:sop/copyxform]
    - [Node:sop/copy]

